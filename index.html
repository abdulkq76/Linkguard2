<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkGuard AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // 2. React Hooks & Icons vorbereiten
        const { useState, useEffect } = React;
        const { Shield, AlertTriangle, CheckCircle, Search, Zap, Info, ShieldAlert, ExternalLink } = lucide;

        const App = () => {
            const [url, setUrl] = useState('');
            const [loading, setLoading] = useState(false);
            const [result, setResult] = useState(null);

            // HIER DEINEN API KEY EINTRAGEN
            const apiKey = "AIzaSyB02PD-sjoZeH_fDbQZl5kSxlCYb3Yfi58"; 

            const analyzeLink = async () => {
                if (!url) return;
                setLoading(true);
                const systemPrompt = `Analyze the provided URL for phishing and scams. Respond ONLY in JSON: { "score": 0-100, "status": "Safe" | "Suspicious" | "High Risk", "verdict": "Summary", "details": ["Point 1"], "isPhishing": boolean }`;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-8b:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: `Analyze: ${url}` }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] },
                            generationConfig: { responseMimeType: "application/json" }
                        })
                    });
                    const data = await response.json();
                    setResult(JSON.parse(data.candidates[0].content.parts[0].text));
                } catch (e) { alert("Fehler bei der Analyse"); }
                finally { setLoading(false); }
            };

            const getStatusColor = (s) => s >= 80 ? 'text-emerald-400 border-emerald-500/30 bg-emerald-500/10' : s >= 40 ? 'text-amber-400 border-amber-500/30 bg-amber-500/10' : 'text-rose-400 border-rose-500/30 bg-rose-500/10';
            const getProgressColor = (s) => s >= 80 ? 'stroke-emerald-500' : s >= 40 ? 'stroke-amber-500' : 'stroke-rose-500';

            return (
                <div className="min-h-screen bg-[#020617] text-slate-100 font-sans p-6">
                    <div className="max-w-4xl mx-auto py-12">
                        <header className="text-center mb-16">
                            <h1 className="text-5xl font-bold mb-4">LinkGuard<span className="text-blue-500">.</span></h1>
                            <p className="text-slate-400">KI-Sicherheitsanalyse für deine Links.</p>
                        </header>

                        <div className="bg-slate-900/40 border border-slate-800 rounded-3xl p-2 mb-12 flex flex-col md:flex-row gap-2">
                            <input type="text" value={url} onChange={(e)=>setUrl(e.target.value)} placeholder="URL hier einfügen..." className="flex-grow bg-transparent p-5 outline-none"/>
                            <button onClick={analyzeLink} className="bg-blue-600 px-10 py-5 rounded-2xl font-bold active:scale-95 transition-all">
                                {loading ? "Checkt..." : "Verify"}
                            </button>
                        </div>

                        {result && (
                            <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                                <div className={`bg-slate-900/60 border rounded-3xl p-8 ${result.score < 40 ? 'border-rose-500/20' : 'border-slate-800'}`}>
                                    <div className="flex flex-col md:flex-row items-center gap-10">
                                        <div className="text-3xl font-bold p-8 border-4 rounded-full">{result.score}</div>
                                        <div>
                                            <div className={`inline-block px-3 py-1 rounded border text-[10px] mb-4 ${getStatusColor(result.score)}`}>{result.status}</div>
                                            <h2 className="text-2xl font-bold mb-2">{result.score < 40 ? "Gefahr erkannt" : "Sicherheits-Check"}</h2>
                                            <p className="text-slate-400">{result.verdict}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
